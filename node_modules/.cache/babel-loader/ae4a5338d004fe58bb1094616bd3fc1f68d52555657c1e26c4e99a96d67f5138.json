{"ast":null,"code":"import { Html5QrcodeConstants, Html5QrcodeScanType, Html5QrcodeErrorFactory, BaseLoggger, isNullOrUndefined, clip } from \"./core\";\nimport { Html5Qrcode } from \"./html5-qrcode\";\nimport { Html5QrcodeScannerStrings } from \"./strings\";\nimport { ASSET_FILE_SCAN, ASSET_CAMERA_SCAN } from \"./image-assets\";\nimport { PersistedDataManager } from \"./storage\";\nimport { LibraryInfoContainer } from \"./ui\";\nimport { CameraPermissions } from \"./camera/permissions\";\nimport { ScanTypeSelector } from \"./ui/scanner/scan-type-selector\";\nimport { TorchButton } from \"./ui/scanner/torch-button\";\nimport { FileSelectionUi } from \"./ui/scanner/file-selection-ui\";\nimport { BaseUiElementFactory, PublicUiElementIdAndClasses } from \"./ui/scanner/base\";\nimport { CameraSelectionUi } from \"./ui/scanner/camera-selection-ui\";\nimport { CameraZoomUi } from \"./ui/scanner/camera-zoom-ui\";\nvar Html5QrcodeScannerStatus;\n(function (Html5QrcodeScannerStatus) {\n  Html5QrcodeScannerStatus[Html5QrcodeScannerStatus[\"STATUS_DEFAULT\"] = 0] = \"STATUS_DEFAULT\";\n  Html5QrcodeScannerStatus[Html5QrcodeScannerStatus[\"STATUS_SUCCESS\"] = 1] = \"STATUS_SUCCESS\";\n  Html5QrcodeScannerStatus[Html5QrcodeScannerStatus[\"STATUS_WARNING\"] = 2] = \"STATUS_WARNING\";\n  Html5QrcodeScannerStatus[Html5QrcodeScannerStatus[\"STATUS_REQUESTING_PERMISSION\"] = 3] = \"STATUS_REQUESTING_PERMISSION\";\n})(Html5QrcodeScannerStatus || (Html5QrcodeScannerStatus = {}));\nfunction toHtml5QrcodeCameraScanConfig(config) {\n  return {\n    fps: config.fps,\n    qrbox: config.qrbox,\n    aspectRatio: config.aspectRatio,\n    disableFlip: config.disableFlip,\n    videoConstraints: config.videoConstraints\n  };\n}\nfunction toHtml5QrcodeFullConfig(config, verbose) {\n  return {\n    formatsToSupport: config.formatsToSupport,\n    useBarCodeDetectorIfSupported: config.useBarCodeDetectorIfSupported,\n    experimentalFeatures: config.experimentalFeatures,\n    verbose: verbose\n  };\n}\nvar Html5QrcodeScanner = function () {\n  function Html5QrcodeScanner(elementId, config, verbose) {\n    this.lastMatchFound = null;\n    this.cameraScanImage = null;\n    this.fileScanImage = null;\n    this.fileSelectionUi = null;\n    this.elementId = elementId;\n    this.config = this.createConfig(config);\n    this.verbose = verbose === true;\n    if (!document.getElementById(elementId)) {\n      throw \"HTML Element with id=\".concat(elementId, \" not found\");\n    }\n    this.scanTypeSelector = new ScanTypeSelector(this.config.supportedScanTypes);\n    this.currentScanType = this.scanTypeSelector.getDefaultScanType();\n    this.sectionSwapAllowed = true;\n    this.logger = new BaseLoggger(this.verbose);\n    this.persistedDataManager = new PersistedDataManager();\n    if (config.rememberLastUsedCamera !== true) {\n      this.persistedDataManager.reset();\n    }\n  }\n  Html5QrcodeScanner.prototype.render = function (qrCodeSuccessCallback, qrCodeErrorCallback) {\n    var _this = this;\n    this.lastMatchFound = null;\n    this.qrCodeSuccessCallback = function (decodedText, result) {\n      if (qrCodeSuccessCallback) {\n        qrCodeSuccessCallback(decodedText, result);\n      } else {\n        if (_this.lastMatchFound === decodedText) {\n          return;\n        }\n        _this.lastMatchFound = decodedText;\n        _this.setHeaderMessage(Html5QrcodeScannerStrings.lastMatch(decodedText), Html5QrcodeScannerStatus.STATUS_SUCCESS);\n      }\n    };\n    this.qrCodeErrorCallback = function (errorMessage, error) {\n      if (qrCodeErrorCallback) {\n        qrCodeErrorCallback(errorMessage, error);\n      }\n    };\n    var container = document.getElementById(this.elementId);\n    if (!container) {\n      throw \"HTML Element with id=\".concat(this.elementId, \" not found\");\n    }\n    container.innerHTML = \"\";\n    this.createBasicLayout(container);\n    this.html5Qrcode = new Html5Qrcode(this.getScanRegionId(), toHtml5QrcodeFullConfig(this.config, this.verbose));\n  };\n  Html5QrcodeScanner.prototype.pause = function (shouldPauseVideo) {\n    if (isNullOrUndefined(shouldPauseVideo) || shouldPauseVideo !== true) {\n      shouldPauseVideo = false;\n    }\n    this.getHtml5QrcodeOrFail().pause(shouldPauseVideo);\n  };\n  Html5QrcodeScanner.prototype.resume = function () {\n    this.getHtml5QrcodeOrFail().resume();\n  };\n  Html5QrcodeScanner.prototype.getState = function () {\n    return this.getHtml5QrcodeOrFail().getState();\n  };\n  Html5QrcodeScanner.prototype.clear = function () {\n    var _this = this;\n    var emptyHtmlContainer = function () {\n      var mainContainer = document.getElementById(_this.elementId);\n      if (mainContainer) {\n        mainContainer.innerHTML = \"\";\n        _this.resetBasicLayout(mainContainer);\n      }\n    };\n    if (this.html5Qrcode) {\n      return new Promise(function (resolve, reject) {\n        if (!_this.html5Qrcode) {\n          resolve();\n          return;\n        }\n        if (_this.html5Qrcode.isScanning) {\n          _this.html5Qrcode.stop().then(function (_) {\n            if (!_this.html5Qrcode) {\n              resolve();\n              return;\n            }\n            _this.html5Qrcode.clear();\n            emptyHtmlContainer();\n            resolve();\n          }).catch(function (error) {\n            if (_this.verbose) {\n              _this.logger.logError(\"Unable to stop qrcode scanner\", error);\n            }\n            reject(error);\n          });\n        } else {\n          _this.html5Qrcode.clear();\n          emptyHtmlContainer();\n          resolve();\n        }\n      });\n    }\n    return Promise.resolve();\n  };\n  Html5QrcodeScanner.prototype.getRunningTrackCapabilities = function () {\n    return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities();\n  };\n  Html5QrcodeScanner.prototype.getRunningTrackSettings = function () {\n    return this.getHtml5QrcodeOrFail().getRunningTrackSettings();\n  };\n  Html5QrcodeScanner.prototype.applyVideoConstraints = function (videoConstaints) {\n    return this.getHtml5QrcodeOrFail().applyVideoConstraints(videoConstaints);\n  };\n  Html5QrcodeScanner.prototype.getHtml5QrcodeOrFail = function () {\n    if (!this.html5Qrcode) {\n      throw \"Code scanner not initialized.\";\n    }\n    return this.html5Qrcode;\n  };\n  Html5QrcodeScanner.prototype.createConfig = function (config) {\n    if (config) {\n      if (!config.fps) {\n        config.fps = Html5QrcodeConstants.SCAN_DEFAULT_FPS;\n      }\n      if (config.rememberLastUsedCamera !== !Html5QrcodeConstants.DEFAULT_REMEMBER_LAST_CAMERA_USED) {\n        config.rememberLastUsedCamera = Html5QrcodeConstants.DEFAULT_REMEMBER_LAST_CAMERA_USED;\n      }\n      if (!config.supportedScanTypes) {\n        config.supportedScanTypes = Html5QrcodeConstants.DEFAULT_SUPPORTED_SCAN_TYPE;\n      }\n      return config;\n    }\n    return {\n      fps: Html5QrcodeConstants.SCAN_DEFAULT_FPS,\n      rememberLastUsedCamera: Html5QrcodeConstants.DEFAULT_REMEMBER_LAST_CAMERA_USED,\n      supportedScanTypes: Html5QrcodeConstants.DEFAULT_SUPPORTED_SCAN_TYPE\n    };\n  };\n  Html5QrcodeScanner.prototype.createBasicLayout = function (parent) {\n    parent.style.position = \"relative\";\n    parent.style.padding = \"0px\";\n    parent.style.border = \"1px solid silver\";\n    this.createHeader(parent);\n    var qrCodeScanRegion = document.createElement(\"div\");\n    var scanRegionId = this.getScanRegionId();\n    qrCodeScanRegion.id = scanRegionId;\n    qrCodeScanRegion.style.width = \"100%\";\n    qrCodeScanRegion.style.minHeight = \"100px\";\n    qrCodeScanRegion.style.textAlign = \"center\";\n    parent.appendChild(qrCodeScanRegion);\n    if (ScanTypeSelector.isCameraScanType(this.currentScanType)) {\n      this.insertCameraScanImageToScanRegion();\n    } else {\n      this.insertFileScanImageToScanRegion();\n    }\n    var qrCodeDashboard = document.createElement(\"div\");\n    var dashboardId = this.getDashboardId();\n    qrCodeDashboard.id = dashboardId;\n    qrCodeDashboard.style.width = \"100%\";\n    parent.appendChild(qrCodeDashboard);\n    this.setupInitialDashboard(qrCodeDashboard);\n  };\n  Html5QrcodeScanner.prototype.resetBasicLayout = function (mainContainer) {\n    mainContainer.style.border = \"none\";\n  };\n  Html5QrcodeScanner.prototype.setupInitialDashboard = function (dashboard) {\n    this.createSection(dashboard);\n    this.createSectionControlPanel();\n    if (this.scanTypeSelector.hasMoreThanOneScanType()) {\n      this.createSectionSwap();\n    }\n  };\n  Html5QrcodeScanner.prototype.createHeader = function (dashboard) {\n    var header = document.createElement(\"div\");\n    header.style.textAlign = \"left\";\n    header.style.margin = \"0px\";\n    dashboard.appendChild(header);\n    var libraryInfo = new LibraryInfoContainer();\n    libraryInfo.renderInto(header);\n    var headerMessageContainer = document.createElement(\"div\");\n    headerMessageContainer.id = this.getHeaderMessageContainerId();\n    headerMessageContainer.style.display = \"none\";\n    headerMessageContainer.style.textAlign = \"center\";\n    headerMessageContainer.style.fontSize = \"14px\";\n    headerMessageContainer.style.padding = \"2px 10px\";\n    headerMessageContainer.style.margin = \"4px\";\n    headerMessageContainer.style.borderTop = \"1px solid #f6f6f6\";\n    header.appendChild(headerMessageContainer);\n  };\n  Html5QrcodeScanner.prototype.createSection = function (dashboard) {\n    var section = document.createElement(\"div\");\n    section.id = this.getDashboardSectionId();\n    section.style.width = \"100%\";\n    section.style.padding = \"10px 0px 10px 0px\";\n    section.style.textAlign = \"left\";\n    dashboard.appendChild(section);\n  };\n  Html5QrcodeScanner.prototype.createCameraListUi = function (scpCameraScanRegion, requestPermissionContainer, requestPermissionButton) {\n    var $this = this;\n    $this.showHideScanTypeSwapLink(false);\n    $this.setHeaderMessage(Html5QrcodeScannerStrings.cameraPermissionRequesting());\n    var createPermissionButtonIfNotExists = function () {\n      if (!requestPermissionButton) {\n        $this.createPermissionButton(scpCameraScanRegion, requestPermissionContainer);\n      }\n    };\n    Html5Qrcode.getCameras().then(function (cameras) {\n      $this.persistedDataManager.setHasPermission(true);\n      $this.showHideScanTypeSwapLink(true);\n      $this.resetHeaderMessage();\n      if (cameras && cameras.length > 0) {\n        scpCameraScanRegion.removeChild(requestPermissionContainer);\n        $this.renderCameraSelection(cameras);\n      } else {\n        $this.setHeaderMessage(Html5QrcodeScannerStrings.noCameraFound(), Html5QrcodeScannerStatus.STATUS_WARNING);\n        createPermissionButtonIfNotExists();\n      }\n    }).catch(function (error) {\n      $this.persistedDataManager.setHasPermission(false);\n      if (requestPermissionButton) {\n        requestPermissionButton.disabled = false;\n      } else {\n        createPermissionButtonIfNotExists();\n      }\n      $this.setHeaderMessage(error, Html5QrcodeScannerStatus.STATUS_WARNING);\n      $this.showHideScanTypeSwapLink(true);\n    });\n  };\n  Html5QrcodeScanner.prototype.createPermissionButton = function (scpCameraScanRegion, requestPermissionContainer) {\n    var $this = this;\n    var requestPermissionButton = BaseUiElementFactory.createElement(\"button\", this.getCameraPermissionButtonId());\n    requestPermissionButton.innerText = Html5QrcodeScannerStrings.cameraPermissionTitle();\n    requestPermissionButton.addEventListener(\"click\", function () {\n      requestPermissionButton.disabled = true;\n      $this.createCameraListUi(scpCameraScanRegion, requestPermissionContainer, requestPermissionButton);\n    });\n    requestPermissionContainer.appendChild(requestPermissionButton);\n  };\n  Html5QrcodeScanner.prototype.createPermissionsUi = function (scpCameraScanRegion, requestPermissionContainer) {\n    var $this = this;\n    if (ScanTypeSelector.isCameraScanType(this.currentScanType) && this.persistedDataManager.hasCameraPermissions()) {\n      CameraPermissions.hasPermissions().then(function (hasPermissions) {\n        if (hasPermissions) {\n          $this.createCameraListUi(scpCameraScanRegion, requestPermissionContainer);\n        } else {\n          $this.persistedDataManager.setHasPermission(false);\n          $this.createPermissionButton(scpCameraScanRegion, requestPermissionContainer);\n        }\n      }).catch(function (_) {\n        $this.persistedDataManager.setHasPermission(false);\n        $this.createPermissionButton(scpCameraScanRegion, requestPermissionContainer);\n      });\n      return;\n    }\n    this.createPermissionButton(scpCameraScanRegion, requestPermissionContainer);\n  };\n  Html5QrcodeScanner.prototype.createSectionControlPanel = function () {\n    var section = document.getElementById(this.getDashboardSectionId());\n    var sectionControlPanel = document.createElement(\"div\");\n    section.appendChild(sectionControlPanel);\n    var scpCameraScanRegion = document.createElement(\"div\");\n    scpCameraScanRegion.id = this.getDashboardSectionCameraScanRegionId();\n    scpCameraScanRegion.style.display = ScanTypeSelector.isCameraScanType(this.currentScanType) ? \"block\" : \"none\";\n    sectionControlPanel.appendChild(scpCameraScanRegion);\n    var requestPermissionContainer = document.createElement(\"div\");\n    requestPermissionContainer.style.textAlign = \"center\";\n    scpCameraScanRegion.appendChild(requestPermissionContainer);\n    if (this.scanTypeSelector.isCameraScanRequired()) {\n      this.createPermissionsUi(scpCameraScanRegion, requestPermissionContainer);\n    }\n    this.renderFileScanUi(sectionControlPanel);\n  };\n  Html5QrcodeScanner.prototype.renderFileScanUi = function (parent) {\n    var showOnRender = ScanTypeSelector.isFileScanType(this.currentScanType);\n    var $this = this;\n    var onFileSelected = function (file) {\n      if (!$this.html5Qrcode) {\n        throw \"html5Qrcode not defined\";\n      }\n      if (!ScanTypeSelector.isFileScanType($this.currentScanType)) {\n        return;\n      }\n      $this.setHeaderMessage(Html5QrcodeScannerStrings.loadingImage());\n      $this.html5Qrcode.scanFileV2(file, true).then(function (html5qrcodeResult) {\n        $this.resetHeaderMessage();\n        $this.qrCodeSuccessCallback(html5qrcodeResult.decodedText, html5qrcodeResult);\n      }).catch(function (error) {\n        $this.setHeaderMessage(error, Html5QrcodeScannerStatus.STATUS_WARNING);\n        $this.qrCodeErrorCallback(error, Html5QrcodeErrorFactory.createFrom(error));\n      });\n    };\n    this.fileSelectionUi = FileSelectionUi.create(parent, showOnRender, onFileSelected);\n  };\n  Html5QrcodeScanner.prototype.renderCameraSelection = function (cameras) {\n    var _this = this;\n    var $this = this;\n    var scpCameraScanRegion = document.getElementById(this.getDashboardSectionCameraScanRegionId());\n    scpCameraScanRegion.style.textAlign = \"center\";\n    var cameraZoomUi = CameraZoomUi.create(scpCameraScanRegion, false);\n    var renderCameraZoomUiIfSupported = function (cameraCapabilities) {\n      var zoomCapability = cameraCapabilities.zoomFeature();\n      if (!zoomCapability.isSupported()) {\n        return;\n      }\n      cameraZoomUi.setOnCameraZoomValueChangeCallback(function (zoomValue) {\n        zoomCapability.apply(zoomValue);\n      });\n      var defaultZoom = 1;\n      if (_this.config.defaultZoomValueIfSupported) {\n        defaultZoom = _this.config.defaultZoomValueIfSupported;\n      }\n      defaultZoom = clip(defaultZoom, zoomCapability.min(), zoomCapability.max());\n      cameraZoomUi.setValues(zoomCapability.min(), zoomCapability.max(), defaultZoom, zoomCapability.step());\n      cameraZoomUi.show();\n    };\n    var cameraSelectUi = CameraSelectionUi.create(scpCameraScanRegion, cameras);\n    var cameraActionContainer = document.createElement(\"span\");\n    var cameraActionStartButton = BaseUiElementFactory.createElement(\"button\", PublicUiElementIdAndClasses.CAMERA_START_BUTTON_ID);\n    cameraActionStartButton.innerText = Html5QrcodeScannerStrings.scanButtonStartScanningText();\n    cameraActionContainer.appendChild(cameraActionStartButton);\n    var cameraActionStopButton = BaseUiElementFactory.createElement(\"button\", PublicUiElementIdAndClasses.CAMERA_STOP_BUTTON_ID);\n    cameraActionStopButton.innerText = Html5QrcodeScannerStrings.scanButtonStopScanningText();\n    cameraActionStopButton.style.display = \"none\";\n    cameraActionStopButton.disabled = true;\n    cameraActionContainer.appendChild(cameraActionStopButton);\n    var torchButton;\n    var createAndShowTorchButtonIfSupported = function (cameraCapabilities) {\n      if (!cameraCapabilities.torchFeature().isSupported()) {\n        if (torchButton) {\n          torchButton.hide();\n        }\n        return;\n      }\n      if (!torchButton) {\n        torchButton = TorchButton.create(cameraActionContainer, cameraCapabilities.torchFeature(), {\n          display: \"none\",\n          marginLeft: \"5px\"\n        }, function (errorMessage) {\n          $this.setHeaderMessage(errorMessage, Html5QrcodeScannerStatus.STATUS_WARNING);\n        });\n      } else {\n        torchButton.updateTorchCapability(cameraCapabilities.torchFeature());\n      }\n      torchButton.show();\n    };\n    scpCameraScanRegion.appendChild(cameraActionContainer);\n    var resetCameraActionStartButton = function (shouldShow) {\n      if (!shouldShow) {\n        cameraActionStartButton.style.display = \"none\";\n      }\n      cameraActionStartButton.innerText = Html5QrcodeScannerStrings.scanButtonStartScanningText();\n      cameraActionStartButton.style.opacity = \"1\";\n      cameraActionStartButton.disabled = false;\n      if (shouldShow) {\n        cameraActionStartButton.style.display = \"inline-block\";\n      }\n    };\n    cameraActionStartButton.addEventListener(\"click\", function (_) {\n      cameraActionStartButton.innerText = Html5QrcodeScannerStrings.scanButtonScanningStarting();\n      cameraSelectUi.disable();\n      cameraActionStartButton.disabled = true;\n      cameraActionStartButton.style.opacity = \"0.5\";\n      if (_this.scanTypeSelector.hasMoreThanOneScanType()) {\n        $this.showHideScanTypeSwapLink(false);\n      }\n      $this.resetHeaderMessage();\n      var cameraId = cameraSelectUi.getValue();\n      $this.persistedDataManager.setLastUsedCameraId(cameraId);\n      $this.html5Qrcode.start(cameraId, toHtml5QrcodeCameraScanConfig($this.config), $this.qrCodeSuccessCallback, $this.qrCodeErrorCallback).then(function (_) {\n        cameraActionStopButton.disabled = false;\n        cameraActionStopButton.style.display = \"inline-block\";\n        resetCameraActionStartButton(false);\n        var cameraCapabilities = $this.html5Qrcode.getRunningTrackCameraCapabilities();\n        if (_this.config.showTorchButtonIfSupported === true) {\n          createAndShowTorchButtonIfSupported(cameraCapabilities);\n        }\n        if (_this.config.showZoomSliderIfSupported === true) {\n          renderCameraZoomUiIfSupported(cameraCapabilities);\n        }\n      }).catch(function (error) {\n        $this.showHideScanTypeSwapLink(true);\n        cameraSelectUi.enable();\n        resetCameraActionStartButton(true);\n        $this.setHeaderMessage(error, Html5QrcodeScannerStatus.STATUS_WARNING);\n      });\n    });\n    if (cameraSelectUi.hasSingleItem()) {\n      cameraActionStartButton.click();\n    }\n    cameraActionStopButton.addEventListener(\"click\", function (_) {\n      if (!$this.html5Qrcode) {\n        throw \"html5Qrcode not defined\";\n      }\n      cameraActionStopButton.disabled = true;\n      $this.html5Qrcode.stop().then(function (_) {\n        if (_this.scanTypeSelector.hasMoreThanOneScanType()) {\n          $this.showHideScanTypeSwapLink(true);\n        }\n        cameraSelectUi.enable();\n        cameraActionStartButton.disabled = false;\n        cameraActionStopButton.style.display = \"none\";\n        cameraActionStartButton.style.display = \"inline-block\";\n        if (torchButton) {\n          torchButton.reset();\n          torchButton.hide();\n        }\n        cameraZoomUi.removeOnCameraZoomValueChangeCallback();\n        cameraZoomUi.hide();\n        $this.insertCameraScanImageToScanRegion();\n      }).catch(function (error) {\n        cameraActionStopButton.disabled = false;\n        $this.setHeaderMessage(error, Html5QrcodeScannerStatus.STATUS_WARNING);\n      });\n    });\n    if ($this.persistedDataManager.getLastUsedCameraId()) {\n      var cameraId = $this.persistedDataManager.getLastUsedCameraId();\n      if (cameraSelectUi.hasValue(cameraId)) {\n        cameraSelectUi.setValue(cameraId);\n        cameraActionStartButton.click();\n      } else {\n        $this.persistedDataManager.resetLastUsedCameraId();\n      }\n    }\n  };\n  Html5QrcodeScanner.prototype.createSectionSwap = function () {\n    var $this = this;\n    var TEXT_IF_CAMERA_SCAN_SELECTED = Html5QrcodeScannerStrings.textIfCameraScanSelected();\n    var TEXT_IF_FILE_SCAN_SELECTED = Html5QrcodeScannerStrings.textIfFileScanSelected();\n    var section = document.getElementById(this.getDashboardSectionId());\n    var switchContainer = document.createElement(\"div\");\n    switchContainer.style.textAlign = \"center\";\n    var switchScanTypeLink = BaseUiElementFactory.createElement(\"span\", this.getDashboardSectionSwapLinkId());\n    switchScanTypeLink.style.textDecoration = \"underline\";\n    switchScanTypeLink.style.cursor = \"pointer\";\n    switchScanTypeLink.innerText = ScanTypeSelector.isCameraScanType(this.currentScanType) ? TEXT_IF_CAMERA_SCAN_SELECTED : TEXT_IF_FILE_SCAN_SELECTED;\n    switchScanTypeLink.addEventListener(\"click\", function () {\n      if (!$this.sectionSwapAllowed) {\n        if ($this.verbose) {\n          $this.logger.logError(\"Section swap called when not allowed\");\n        }\n        return;\n      }\n      $this.resetHeaderMessage();\n      $this.fileSelectionUi.resetValue();\n      $this.sectionSwapAllowed = false;\n      if (ScanTypeSelector.isCameraScanType($this.currentScanType)) {\n        $this.clearScanRegion();\n        $this.getCameraScanRegion().style.display = \"none\";\n        $this.fileSelectionUi.show();\n        switchScanTypeLink.innerText = TEXT_IF_FILE_SCAN_SELECTED;\n        $this.currentScanType = Html5QrcodeScanType.SCAN_TYPE_FILE;\n        $this.insertFileScanImageToScanRegion();\n      } else {\n        $this.clearScanRegion();\n        $this.getCameraScanRegion().style.display = \"block\";\n        $this.fileSelectionUi.hide();\n        switchScanTypeLink.innerText = TEXT_IF_CAMERA_SCAN_SELECTED;\n        $this.currentScanType = Html5QrcodeScanType.SCAN_TYPE_CAMERA;\n        $this.insertCameraScanImageToScanRegion();\n        $this.startCameraScanIfPermissionExistsOnSwap();\n      }\n      $this.sectionSwapAllowed = true;\n    });\n    switchContainer.appendChild(switchScanTypeLink);\n    section.appendChild(switchContainer);\n  };\n  Html5QrcodeScanner.prototype.startCameraScanIfPermissionExistsOnSwap = function () {\n    var _this = this;\n    var $this = this;\n    if (this.persistedDataManager.hasCameraPermissions()) {\n      CameraPermissions.hasPermissions().then(function (hasPermissions) {\n        if (hasPermissions) {\n          var permissionButton = document.getElementById($this.getCameraPermissionButtonId());\n          if (!permissionButton) {\n            _this.logger.logError(\"Permission button not found, fail;\");\n            throw \"Permission button not found\";\n          }\n          permissionButton.click();\n        } else {\n          $this.persistedDataManager.setHasPermission(false);\n        }\n      }).catch(function (_) {\n        $this.persistedDataManager.setHasPermission(false);\n      });\n      return;\n    }\n  };\n  Html5QrcodeScanner.prototype.resetHeaderMessage = function () {\n    var messageDiv = document.getElementById(this.getHeaderMessageContainerId());\n    messageDiv.style.display = \"none\";\n  };\n  Html5QrcodeScanner.prototype.setHeaderMessage = function (messageText, scannerStatus) {\n    if (!scannerStatus) {\n      scannerStatus = Html5QrcodeScannerStatus.STATUS_DEFAULT;\n    }\n    var messageDiv = this.getHeaderMessageDiv();\n    messageDiv.innerText = messageText;\n    messageDiv.style.display = \"block\";\n    switch (scannerStatus) {\n      case Html5QrcodeScannerStatus.STATUS_SUCCESS:\n        messageDiv.style.background = \"rgba(106, 175, 80, 0.26)\";\n        messageDiv.style.color = \"#477735\";\n        break;\n      case Html5QrcodeScannerStatus.STATUS_WARNING:\n        messageDiv.style.background = \"rgba(203, 36, 49, 0.14)\";\n        messageDiv.style.color = \"#cb2431\";\n        break;\n      case Html5QrcodeScannerStatus.STATUS_DEFAULT:\n      default:\n        messageDiv.style.background = \"rgba(0, 0, 0, 0)\";\n        messageDiv.style.color = \"rgb(17, 17, 17)\";\n        break;\n    }\n  };\n  Html5QrcodeScanner.prototype.showHideScanTypeSwapLink = function (shouldDisplay) {\n    if (this.scanTypeSelector.hasMoreThanOneScanType()) {\n      if (shouldDisplay !== true) {\n        shouldDisplay = false;\n      }\n      this.sectionSwapAllowed = shouldDisplay;\n      this.getDashboardSectionSwapLink().style.display = shouldDisplay ? \"inline-block\" : \"none\";\n    }\n  };\n  Html5QrcodeScanner.prototype.insertCameraScanImageToScanRegion = function () {\n    var $this = this;\n    var qrCodeScanRegion = document.getElementById(this.getScanRegionId());\n    if (this.cameraScanImage) {\n      qrCodeScanRegion.innerHTML = \"<br>\";\n      qrCodeScanRegion.appendChild(this.cameraScanImage);\n      return;\n    }\n    this.cameraScanImage = new Image();\n    this.cameraScanImage.onload = function (_) {\n      qrCodeScanRegion.innerHTML = \"<br>\";\n      qrCodeScanRegion.appendChild($this.cameraScanImage);\n    };\n    this.cameraScanImage.width = 64;\n    this.cameraScanImage.style.opacity = \"0.8\";\n    this.cameraScanImage.src = ASSET_CAMERA_SCAN;\n    this.cameraScanImage.alt = Html5QrcodeScannerStrings.cameraScanAltText();\n  };\n  Html5QrcodeScanner.prototype.insertFileScanImageToScanRegion = function () {\n    var $this = this;\n    var qrCodeScanRegion = document.getElementById(this.getScanRegionId());\n    if (this.fileScanImage) {\n      qrCodeScanRegion.innerHTML = \"<br>\";\n      qrCodeScanRegion.appendChild(this.fileScanImage);\n      return;\n    }\n    this.fileScanImage = new Image();\n    this.fileScanImage.onload = function (_) {\n      qrCodeScanRegion.innerHTML = \"<br>\";\n      qrCodeScanRegion.appendChild($this.fileScanImage);\n    };\n    this.fileScanImage.width = 64;\n    this.fileScanImage.style.opacity = \"0.8\";\n    this.fileScanImage.src = ASSET_FILE_SCAN;\n    this.fileScanImage.alt = Html5QrcodeScannerStrings.fileScanAltText();\n  };\n  Html5QrcodeScanner.prototype.clearScanRegion = function () {\n    var qrCodeScanRegion = document.getElementById(this.getScanRegionId());\n    qrCodeScanRegion.innerHTML = \"\";\n  };\n  Html5QrcodeScanner.prototype.getDashboardSectionId = function () {\n    return \"\".concat(this.elementId, \"__dashboard_section\");\n  };\n  Html5QrcodeScanner.prototype.getDashboardSectionCameraScanRegionId = function () {\n    return \"\".concat(this.elementId, \"__dashboard_section_csr\");\n  };\n  Html5QrcodeScanner.prototype.getDashboardSectionSwapLinkId = function () {\n    return PublicUiElementIdAndClasses.SCAN_TYPE_CHANGE_ANCHOR_ID;\n  };\n  Html5QrcodeScanner.prototype.getScanRegionId = function () {\n    return \"\".concat(this.elementId, \"__scan_region\");\n  };\n  Html5QrcodeScanner.prototype.getDashboardId = function () {\n    return \"\".concat(this.elementId, \"__dashboard\");\n  };\n  Html5QrcodeScanner.prototype.getHeaderMessageContainerId = function () {\n    return \"\".concat(this.elementId, \"__header_message\");\n  };\n  Html5QrcodeScanner.prototype.getCameraPermissionButtonId = function () {\n    return PublicUiElementIdAndClasses.CAMERA_PERMISSION_BUTTON_ID;\n  };\n  Html5QrcodeScanner.prototype.getCameraScanRegion = function () {\n    return document.getElementById(this.getDashboardSectionCameraScanRegionId());\n  };\n  Html5QrcodeScanner.prototype.getDashboardSectionSwapLink = function () {\n    return document.getElementById(this.getDashboardSectionSwapLinkId());\n  };\n  Html5QrcodeScanner.prototype.getHeaderMessageDiv = function () {\n    return document.getElementById(this.getHeaderMessageContainerId());\n  };\n  return Html5QrcodeScanner;\n}();\nexport { Html5QrcodeScanner };","map":{"version":3,"names":["Html5QrcodeConstants","Html5QrcodeScanType","Html5QrcodeErrorFactory","BaseLoggger","isNullOrUndefined","clip","Html5Qrcode","Html5QrcodeScannerStrings","ASSET_FILE_SCAN","ASSET_CAMERA_SCAN","PersistedDataManager","LibraryInfoContainer","CameraPermissions","ScanTypeSelector","TorchButton","FileSelectionUi","BaseUiElementFactory","PublicUiElementIdAndClasses","CameraSelectionUi","CameraZoomUi","Html5QrcodeScannerStatus","toHtml5QrcodeCameraScanConfig","config","fps","qrbox","aspectRatio","disableFlip","videoConstraints","toHtml5QrcodeFullConfig","verbose","formatsToSupport","useBarCodeDetectorIfSupported","experimentalFeatures","Html5QrcodeScanner","elementId","lastMatchFound","cameraScanImage","fileScanImage","fileSelectionUi","createConfig","document","getElementById","concat","scanTypeSelector","supportedScanTypes","currentScanType","getDefaultScanType","sectionSwapAllowed","logger","persistedDataManager","rememberLastUsedCamera","reset","prototype","render","qrCodeSuccessCallback","qrCodeErrorCallback","_this","decodedText","result","setHeaderMessage","lastMatch","STATUS_SUCCESS","errorMessage","error","container","innerHTML","createBasicLayout","html5Qrcode","getScanRegionId","pause","shouldPauseVideo","getHtml5QrcodeOrFail","resume","getState","clear","emptyHtmlContainer","mainContainer","resetBasicLayout","Promise","resolve","reject","isScanning","stop","then","_","catch","logError","getRunningTrackCapabilities","getRunningTrackSettings","applyVideoConstraints","videoConstaints","SCAN_DEFAULT_FPS","DEFAULT_REMEMBER_LAST_CAMERA_USED","DEFAULT_SUPPORTED_SCAN_TYPE","parent","style","position","padding","border","createHeader","qrCodeScanRegion","createElement","scanRegionId","id","width","minHeight","textAlign","appendChild","isCameraScanType","insertCameraScanImageToScanRegion","insertFileScanImageToScanRegion","qrCodeDashboard","dashboardId","getDashboardId","setupInitialDashboard","dashboard","createSection","createSectionControlPanel","hasMoreThanOneScanType","createSectionSwap","header","margin","libraryInfo","renderInto","headerMessageContainer","getHeaderMessageContainerId","display","fontSize","borderTop","section","getDashboardSectionId","createCameraListUi","scpCameraScanRegion","requestPermissionContainer","requestPermissionButton","$this","showHideScanTypeSwapLink","cameraPermissionRequesting","createPermissionButtonIfNotExists","createPermissionButton","getCameras","cameras","setHasPermission","resetHeaderMessage","length","removeChild","renderCameraSelection","noCameraFound","STATUS_WARNING","disabled","getCameraPermissionButtonId","innerText","cameraPermissionTitle","addEventListener","createPermissionsUi","hasCameraPermissions","hasPermissions","sectionControlPanel","getDashboardSectionCameraScanRegionId","isCameraScanRequired","renderFileScanUi","showOnRender","isFileScanType","onFileSelected","file","loadingImage","scanFileV2","html5qrcodeResult","createFrom","create","cameraZoomUi","renderCameraZoomUiIfSupported","cameraCapabilities","zoomCapability","zoomFeature","isSupported","setOnCameraZoomValueChangeCallback","zoomValue","apply","defaultZoom","defaultZoomValueIfSupported","min","max","setValues","step","show","cameraSelectUi","cameraActionContainer","cameraActionStartButton","CAMERA_START_BUTTON_ID","scanButtonStartScanningText","cameraActionStopButton","CAMERA_STOP_BUTTON_ID","scanButtonStopScanningText","torchButton","createAndShowTorchButtonIfSupported","torchFeature","hide","marginLeft","updateTorchCapability","resetCameraActionStartButton","shouldShow","opacity","scanButtonScanningStarting","disable","cameraId","getValue","setLastUsedCameraId","start","getRunningTrackCameraCapabilities","showTorchButtonIfSupported","showZoomSliderIfSupported","enable","hasSingleItem","click","removeOnCameraZoomValueChangeCallback","getLastUsedCameraId","hasValue","setValue","resetLastUsedCameraId","TEXT_IF_CAMERA_SCAN_SELECTED","textIfCameraScanSelected","TEXT_IF_FILE_SCAN_SELECTED","textIfFileScanSelected","switchContainer","switchScanTypeLink","getDashboardSectionSwapLinkId","textDecoration","cursor","resetValue","clearScanRegion","getCameraScanRegion","SCAN_TYPE_FILE","SCAN_TYPE_CAMERA","startCameraScanIfPermissionExistsOnSwap","permissionButton","messageDiv","messageText","scannerStatus","STATUS_DEFAULT","getHeaderMessageDiv","background","color","shouldDisplay","getDashboardSectionSwapLink","Image","onload","src","alt","cameraScanAltText","fileScanAltText","SCAN_TYPE_CHANGE_ANCHOR_ID","CAMERA_PERMISSION_BUTTON_ID"],"sources":["../../src/html5-qrcode-scanner.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}